
				<header class="article-header">
					<div class="wrap cf" id="inner-content">
						<h1 class="entry-title single-title">統計圖表製作 – 使用 d3-generator</h1>
					</div>
				</header> 
				<div class="wrap cf" id="inner-content">
					
					<div role="main" class="m-all t-2of3 d-5of7 cf" id="main">

													<article role="article" class="cf post-140 post type-post status-publish format-standard has-post-thumbnail hentry category-9 tag-d3-generator tag-d3js tag-11 tag-12" id="post-140">
							<p class="byline vcard">
								Posted <time pubdate="" datetime="2015-02-23" class="updated">23 2 月, 2015</time> by <span class="author"><a rel="author external" title="造訪「infographics.tw」的網站" href="https://infographics.tw">infographics.tw</a></span>								under <a rel="category tag" href="https://blog.infographics.tw/category/%e4%bb%8b%e7%b4%b9/">介紹</a>							</p>

							<section class="entry-content cf">
  
  <a href="https://blog.infographics.tw/wp-content/uploads/2015/02/cover2.png"><img sizes="(max-width: 900px) 100vw, 900px" srcset="https://blog.infographics.tw/wp-content/uploads/2015/02/cover2.png 900w, https://blog.infographics.tw/wp-content/uploads/2015/02/cover2-300x176.png 300w" height="527" width="900" alt="D3 Generator" src="https://blog.infographics.tw/wp-content/uploads/2015/02/cover2.png" class="aligncenter size-full wp-image-154"></a>
<p>D3.js ( <a href="https://d3js.org" title="D3JS">https://d3js.org</a> ) 是一個強大的網頁端視覺化函式庫，除了他獨特的資料驅動式物件模型之外，完整的視覺化輔助套件也是其強大的原因之一。不過彈性必然帶來複雜度，強大的背後隱含陡峭的學習曲線與費時的程式設計。</p>
<p>其實線上已經存在許多包裝 D3.js 成為另一套更容易使用的函式庫，例如 <a href="https://c3js.org/" title="C3Js">C3.js</a> 、 <a href="https://fastly.github.io/epoch/" title="Epoch">Epoch</a> 等等，不過函式庫包裝的同時往往也就失去了彈性。今天要介紹的這個 d3-generator ( <a href="https://d3-generator.com/" title="D3 Generator">https://d3-generator.com/</a> ) 跳脫函式庫的思維從程式碼產生器出發，透過簡單的設定產生對應的 D3js 視覺化程式碼，接著你就可以修改程式碼來做自己的客製化。</p>
<p><span id="more-140"></span></p>
<p>d3-generator 使用只有三個步驟：</p>
<ol>
<li>匯入資料 － CSV 限定</li>
<li>圖表設定 － 選定圖表對應欄位。目前只能產生長條圖</li>
<li>產生圖表、微調程式碼</li>
</ol>
<p>開啟網頁時他已經先帶入了一筆測試用的資料供你玩耍了：</p>
<a href="https://blog.infographics.tw/wp-content/uploads/2015/02/step1.png"><img sizes="(max-width: 709px) 100vw, 709px" srcset="https://blog.infographics.tw/wp-content/uploads/2015/02/step1.png 709w, https://blog.infographics.tw/wp-content/uploads/2015/02/step1-300x163.png 300w" height="385" width="709" alt="D3 Generator: Step1" src="https://blog.infographics.tw/wp-content/uploads/2015/02/step1.png" class="aligncenter size-full wp-image-141"></a>
<p>欄位對應的設定，包括長度、欄位名稱、排序等等的設定：</p>
<a href="https://blog.infographics.tw/wp-content/uploads/2015/02/step2.png"><img sizes="(max-width: 709px) 100vw, 709px" srcset="https://blog.infographics.tw/wp-content/uploads/2015/02/step2.png 709w, https://blog.infographics.tw/wp-content/uploads/2015/02/step2-300x148.png 300w" height="350" width="709" alt="D3 Generator: Step2" src="https://blog.infographics.tw/wp-content/uploads/2015/02/step2.png" class="aligncenter size-full wp-image-142"></a>
<p>產生出來的圖表與程式碼：</p>
<a href="https://blog.infographics.tw/wp-content/uploads/2015/02/step4.png"><img sizes="(max-width: 709px) 100vw, 709px" srcset="https://blog.infographics.tw/wp-content/uploads/2015/02/step4.png 709w, https://blog.infographics.tw/wp-content/uploads/2015/02/step4-300x193.png 300w" height="456" width="709" alt="D3 Generator: Step4" src="https://blog.infographics.tw/wp-content/uploads/2015/02/step4.png" class="aligncenter size-full wp-image-143"></a>
<a href="https://blog.infographics.tw/wp-content/uploads/2015/02/step3.png"><img sizes="(max-width: 709px) 100vw, 709px" srcset="https://blog.infographics.tw/wp-content/uploads/2015/02/step3.png 709w, https://blog.infographics.tw/wp-content/uploads/2015/02/step3-300x171.png 300w" height="404" width="709" alt="D3 Generator: Step3" src="https://blog.infographics.tw/wp-content/uploads/2015/02/step3.png" class="aligncenter size-full wp-image-144"></a>
<p>從頭一路做到這裡的速度很快，不過接下來才是圖表製作的重頭戲，怎麼從一個樣板產生的圖表客製出自己想要的效果，這仍然需要對 Javascript 以及 D3JS 熟悉才能很容易的改出有意思的圖表。先從改個顏色下手吧，改顏色相對簡單，增修兩行程式碼即可：</p>
<pre>  var color = d3.scale.ordinal().range(["#57C768","#9D7834","#D7CC88" ... ]);
  barContainer. ...&nbsp;.attr('fill', function(d) {return color(d['Name']);});
</pre>
<p>這兩行程式碼將每個長條根據其國名著上不同的顏色：</p>
<a href="https://blog.infographics.tw/wp-content/uploads/2015/02/custom-color.png"><img sizes="(max-width: 709px) 100vw, 709px" srcset="https://blog.infographics.tw/wp-content/uploads/2015/02/custom-color.png 709w, https://blog.infographics.tw/wp-content/uploads/2015/02/custom-color-300x192.png 300w" height="453" width="709" alt="D3 Generator: Customize Color" src="https://blog.infographics.tw/wp-content/uploads/2015/02/custom-color.png" class="aligncenter size-full wp-image-150"></a>
<p>光是這樣當然還不夠看，讓我們試著把 Bar Chart 變成 Curved Bar Chart。自動產生的程式碼使用 RECT 這個 SVG 元素來繪製長條色塊，我們改用 PATH 元素並利用 D3JS 的 d3.svg.arc 函式來繪製圓弧線：</p>
<pre>  ... .attr("d",function(d,i) {
    j = Math.abs(19 - i),&nbsp;w = yScale.rangeBand();
    arc = d3.svg.arc().innerRadius(j*w).outerRadius(j*w + w - 2);
    arc.startAngle(0).endAngle(3.14 * barValue(d)/1339);
    return arc();
  })
</pre>
<p>然後拿掉格線跟長條後方的數字，圖表即變成這個樣子：</p>
<a href="https://blog.infographics.tw/wp-content/uploads/2015/02/curved-bar-chart.png"><img sizes="(max-width: 707px) 100vw, 707px" srcset="https://blog.infographics.tw/wp-content/uploads/2015/02/curved-bar-chart.png 707w, https://blog.infographics.tw/wp-content/uploads/2015/02/curved-bar-chart-300x192.png 300w" height="453" width="707" alt="D3 Generator: Curved Bar Chart" src="https://blog.infographics.tw/wp-content/uploads/2015/02/curved-bar-chart.png" class="aligncenter size-full wp-image-152"></a>
<p>&nbsp;</p>
<p>比例上稍微有點跑掉，因為程式碼使用半圓弧度來計算，有些色塊一路畫到畫面外去了，將程式碼中的 3.14 改為 1.57 應可修正，不過做為示意效果還不錯。</p>
<h2>優缺點總結</h2>
<p>這算是一個簡單的小工具，由於侷限在長條圖產生，真正能玩的變化並不多，而且一旦改動幅度大，整個程式碼也等於重寫了。再者，必須要會使用 Javascript 程式設計以及熟悉 D3JS 函式庫，否則很難真的做出很大的改動，頂多就是改改顏色或是字型等等的設定。</p>
<p>即便如此，當做開發視覺化網頁的起點或是做為程式教學的用途也不錯，若未來能提供不同類型的圖表樣版產生那就更好了。這個工具提供產生後的完整 HTML + Javascript 程式碼，必要的函式庫都使用 CDN 連結，拷貝貼上到網站上之後就可以使用囉！</p>
<br>      <div class="tag-links">
      <div class="clear"></div>
      TAGS:       <a rel="tag" href="https://blog.infographics.tw/tag/d3-generator/">d3-generator</a>,<a rel="tag" href="https://blog.infographics.tw/tag/d3js/">d3js</a>,<a rel="tag" href="https://blog.infographics.tw/tag/%e5%b7%a5%e5%85%b7/">工具</a>,<a rel="tag" href="https://blog.infographics.tw/tag/%e7%b6%b2%e7%ab%99/">網站</a>    </div>
  </section> 
							<div class="next-prev-post">
			                  <div class="prev">
			                    <p><span class="fa fa-angle-left"></span> PREVIOUS POST</p> <a rel="prev" href="https://blog.infographics.tw/2015/02/chart-visualization-with-infogram/">使用 infogr.am 製作圖表與資訊圖</a>			                  </div>
			                  <div class="center-divider"></div>
			                  <div class="next">
			                  <p>NEXT POST <span class="fa fa-angle-right"></span></p> <a rel="next" href="https://blog.infographics.tw/2015/02/seven-common-chart-visualization-mistakes/">千萬不要犯，7 個常見的圖表錯誤</a>			                  </div>
			                  <div class="clear"></div>
			                </div> 

							
							<footer class="article-footer">
								<div class="avatar">
									<img width="150" height="150" class="avatar avatar-150 photo" srcset="https://2.gravatar.com/avatar/2868ceab90bafecec35f8d80cc91795f?s=300&amp;d=mm&amp;r=g 2x" src="https://2.gravatar.com/avatar/2868ceab90bafecec35f8d80cc91795f?s=150&amp;d=mm&amp;r=g" alt="">								</div>
								<div class="info">
									<p class="author"><span>Written by</span> infographics.tw</p>
									<p class="author-desc">  </p>
								</div>
								<div class="clear"></div>
							</footer> 
																						<div class="related posts">
								
									<h3>Related Posts</h3>
									<ul> 
																					
											<li>
												<a title="讓視覺化作品躍出畫面 – 使用 loading.io 動畫圖示庫" rel="bookmark" href="https://blog.infographics.tw/2018/02/loading-io-animated-icons/">
													<img sizes="(max-width: 300px) 100vw, 300px" srcset="https://blog.infographics.tw/wp-content/uploads/2018/02/thumbnail-300x300.gif 300w, https://blog.infographics.tw/wp-content/uploads/2018/02/thumbnail-150x150.gif 150w, https://blog.infographics.tw/wp-content/uploads/2018/02/thumbnail-125x125.gif 125w" alt="bouncing rainbow heart" class="attachment-simplyread-thumb-image-300by300 size-simplyread-thumb-image-300by300 wp-post-image" src="https://blog.infographics.tw/wp-content/uploads/2018/02/thumbnail-300x300.gif">																										<br>
													讓視覺化作品躍出畫面 – 使用 loading.io 動畫圖示庫												</a>

											</li>

																					
											<li>
												<a title="Vectr – 永久免費的線上向量圖形編輯服務" rel="bookmark" href="https://blog.infographics.tw/2016/11/vectr/">
													<img sizes="(max-width: 300px) 100vw, 300px" srcset="https://blog.infographics.tw/wp-content/uploads/2016/11/COVER-300x300.jpg 300w, https://blog.infographics.tw/wp-content/uploads/2016/11/COVER-150x150.jpg 150w, https://blog.infographics.tw/wp-content/uploads/2016/11/COVER-125x125.jpg 125w" alt="" class="attachment-simplyread-thumb-image-300by300 size-simplyread-thumb-image-300by300 wp-post-image" src="https://blog.infographics.tw/wp-content/uploads/2016/11/COVER-300x300.jpg">																										<br>
													Vectr – 永久免費的線上向量圖形編輯服務												</a>

											</li>

																					
											<li>
												<a title="微動畫簡單做！使用 animate.css 五秒提升作品質感" rel="bookmark" href="https://blog.infographics.tw/2016/11/animate-css/">
													<img sizes="(max-width: 300px) 100vw, 300px" srcset="https://blog.infographics.tw/wp-content/uploads/2016/11/cover-300x300.gif 300w, https://blog.infographics.tw/wp-content/uploads/2016/11/cover-125x125.gif 125w" alt="" class="attachment-simplyread-thumb-image-300by300 size-simplyread-thumb-image-300by300 wp-post-image" src="https://blog.infographics.tw/wp-content/uploads/2016/11/cover-300x300.gif">																										<br>
													微動畫簡單做！使用 animate.css 五秒提升作品質感												</a>

											</li>

																					
											<li>
												<a title="Reveal.js + slides.com 製作令人驚豔的互動式簡報" rel="bookmark" href="https://blog.infographics.tw/2016/11/reveal-js-and-slides-com/">
													<img sizes="(max-width: 300px) 100vw, 300px" srcset="https://blog.infographics.tw/wp-content/uploads/2016/10/cover-1-300x300.png 300w, https://blog.infographics.tw/wp-content/uploads/2016/10/cover-1-150x150.png 150w, https://blog.infographics.tw/wp-content/uploads/2016/10/cover-1-125x125.png 125w" alt="" class="attachment-simplyread-thumb-image-300by300 size-simplyread-thumb-image-300by300 wp-post-image" src="https://blog.infographics.tw/wp-content/uploads/2016/10/cover-1-300x300.png">																										<br>
													Reveal.js + slides.com 製作令人驚豔的互動式簡報												</a>

											</li>

																				<div class="clear"></div>
									</ul>

								</div>
							
							

  
    <h3 class="h2" id="comments-title"><span>2</span> Comments</h3>

    <section class="commentlist">
        <div class="comment even thread-even depth-1 cf" id="comment-273">
    <article class="cf">
      <header class="comment-author vcard">
                                <img src="https://blog.infographics.tw/wp-content/themes/simply-read/library/images/nothing.gif" width="40" height="40" class="load-gravatar avatar avatar-48 photo" data-gravatar="https://www.gravatar.com/avatar/d26a475acda2f2d3ba4f8286757add51?s=40">
                <cite class="fn">fairolk</cite>         <time datetime="2015-12-24"><a href="https://blog.infographics.tw/2015/02/chart-visualization-with-d3-generator/#comment-273">24 12 月, 2015 </a></time>

      </header>
            <section class="comment_content cf">
        <p>您好<br>
照著您的換了顏色，但是卻沒有照著name三個顏色輪流出現<br>
想請問是否加錯行了呢，謝謝</p>
<p>//color<br>
var color = d3.scale.ordinal().range([“#57C768″,”#9D7834″,”#D7CC88”]);<br>
// bars<br>
var barsContainer = chart.append(‘g’)<br>
  .attr(‘transform’, ‘translate(‘ + barLabelWidth + ‘,’ + (gridLabelHeight + gridChartOffset) + ‘)’);<br>
barsContainer.selectAll(“rect”).data(sortedData).enter().append(“rect”)<br>
  .attr(‘y’, y)<br>
  .attr(‘height’, yScale.rangeBand())<br>
  .attr(‘width’, function(d) { return x(barValue(d)); })<br>
  .attr(‘stroke’, ‘white’)<br>
  .attr(‘fill’, function(d) {return color(d[‘Name’]);});</p>
      </section>
          </article>
    <div class="comment byuser comment-author-infographics-tw bypostauthor odd alt depth-2 cf" id="comment-274">
    <article class="cf">
      <header class="comment-author vcard">
                                <img src="https://blog.infographics.tw/wp-content/themes/simply-read/library/images/nothing.gif" width="40" height="40" class="load-gravatar avatar avatar-48 photo" data-gravatar="https://www.gravatar.com/avatar/2868ceab90bafecec35f8d80cc91795f?s=40">
                <cite class="fn"><a class="url" rel="external nofollow ugc" href="https://infographics.tw">infographics.tw</a></cite>         <time datetime="2015-12-24"><a href="https://blog.infographics.tw/2015/02/chart-visualization-with-d3-generator/#comment-274">24 12 月, 2015 </a></time>

      </header>
            <section class="comment_content cf">
        <p>程式碼初看感覺沒有問題，你有線上的版本或更完整的程式與資料檔可以提供嗎？</p>
      </section>
          </article>
  </div>
</div>
    </section>

    
        	<p class="no-comments">Comments are closed.</p>
    
  
  
							</article> 
						
						
					</div>

					<div role="complementary" class="sidebar m-all t-1of3 d-2of7 last-col cf" id="sidebar1">

	
		<div class="widget_text widget widget_custom_html" id="custom_html-6"><div class="textwidget custom-html-widget"><ins data-ad-changeminwidth="1024" data-ad-height-min="250" data-ad-width-min="300" data-ad-height-max="250" data-ad-width-max="300" data-ad-zone-min="6432" data-ad-zone-max="6431" style="display:inline-block;" class="clickforceads"></ins>
</div></div><div class="widget widget_search" id="search-2"><h4 class="widgettitle">全站搜尋</h4><form action="https://blog.infographics.tw/" class="searchform" id="searchform" method="get" role="search">
				<div>
					<label for="s" class="screen-reader-text">搜尋關鍵字:</label>
					<input id="s" name="s" value="" type="text">
					<input value="搜尋" id="searchsubmit" type="submit">
				</div>
			</form></div>		<div class="widget widget_recent_entries" id="recent-posts-2">		<h4 class="widgettitle">最新文章</h4>		<ul>
											<li>
					<a href="https://blog.infographics.tw/2018/02/loading-io-animated-icons/">讓視覺化作品躍出畫面 – 使用 loading.io 動畫圖示庫</a>
									</li>
											<li>
					<a href="https://blog.infographics.tw/2016/11/vectr/">Vectr – 永久免費的線上向量圖形編輯服務</a>
									</li>
											<li>
					<a href="https://blog.infographics.tw/2016/11/google-spreadsheet-data-scraping/">無痛爬梳自己來，用 Google Spreadsheet 爬取網頁資料</a>
									</li>
											<li>
					<a href="https://blog.infographics.tw/2016/11/animate-css/">微動畫簡單做！使用 animate.css 五秒提升作品質感</a>
									</li>
											<li>
					<a href="https://blog.infographics.tw/2016/11/reveal-js-and-slides-com/">Reveal.js + slides.com 製作令人驚豔的互動式簡報</a>
									</li>
					</ul>
		</div><div class="widget widget_recent_comments" id="recent-comments-2"><h4 class="widgettitle">最新留言</h4><ul id="recentcomments"><li class="recentcomments">「<span class="comment-author-link"><a class="url" rel="external nofollow ugc" href="https://raykuaza-ex.blogspot.com/">Ray</a></span>」在〈<a href="https://blog.infographics.tw/2016/08/coding-intro/#comment-1636">視覺化編程入門 — 我該選什麼程式語言？</a>〉發佈留言</li><li class="recentcomments">「<span class="comment-author-link">戴領袖</span>」在〈<a href="https://blog.infographics.tw/2016/04/interactive-visualization-with-bokeh-and-python/#comment-1622">Python 上前端！利用 Bokeh 與 Python 製作網頁互動視覺化</a>〉發佈留言</li><li class="recentcomments">「<span class="comment-author-link">JUZ</span>」在〈<a href="https://blog.infographics.tw/2016/11/google-spreadsheet-data-scraping/#comment-1568">無痛爬梳自己來，用 Google Spreadsheet 爬取網頁資料</a>〉發佈留言</li><li class="recentcomments">「<span class="comment-author-link">Shealy</span>」在〈<a href="https://blog.infographics.tw/about-us/#comment-1557">關於我們</a>〉發佈留言</li><li class="recentcomments">「<span class="comment-author-link">Jett</span>」在〈<a href="https://blog.infographics.tw/2016/05/text-visualization-with-jieba/#comment-1468">用結巴斷詞實作文字視覺化 — 以 2016 總統就職演講為例</a>〉發佈留言</li></ul></div><div class="widget widget_archive" id="archives-2"><h4 class="widgettitle">過去文章</h4>		<ul>
				<li><a href="https://blog.infographics.tw/2018/02/">2018 年 2 月</a></li>
	<li><a href="https://blog.infographics.tw/2016/11/">2016 年 11 月</a></li>
	<li><a href="https://blog.infographics.tw/2016/08/">2016 年 8 月</a></li>
	<li><a href="https://blog.infographics.tw/2016/05/">2016 年 5 月</a></li>
	<li><a href="https://blog.infographics.tw/2016/04/">2016 年 4 月</a></li>
	<li><a href="https://blog.infographics.tw/2016/03/">2016 年 3 月</a></li>
	<li><a href="https://blog.infographics.tw/2016/02/">2016 年 2 月</a></li>
	<li><a href="https://blog.infographics.tw/2016/01/">2016 年 1 月</a></li>
	<li><a href="https://blog.infographics.tw/2015/12/">2015 年 12 月</a></li>
	<li><a href="https://blog.infographics.tw/2015/11/">2015 年 11 月</a></li>
	<li><a href="https://blog.infographics.tw/2015/10/">2015 年 10 月</a></li>
	<li><a href="https://blog.infographics.tw/2015/09/">2015 年 9 月</a></li>
	<li><a href="https://blog.infographics.tw/2015/08/">2015 年 8 月</a></li>
	<li><a href="https://blog.infographics.tw/2015/07/">2015 年 7 月</a></li>
	<li><a href="https://blog.infographics.tw/2015/06/">2015 年 6 月</a></li>
	<li><a href="https://blog.infographics.tw/2015/05/">2015 年 5 月</a></li>
	<li><a href="https://blog.infographics.tw/2015/04/">2015 年 4 月</a></li>
	<li><a href="https://blog.infographics.tw/2015/03/">2015 年 3 月</a></li>
	<li><a href="https://blog.infographics.tw/2015/02/">2015 年 2 月</a></li>
		</ul>
			</div><div class="widget widget_categories" id="categories-2"><h4 class="widgettitle">分類瀏覽</h4>		<ul>
				<li class="cat-item cat-item-9"><a href="https://blog.infographics.tw/category/%e4%bb%8b%e7%b4%b9/">介紹</a>
</li>
	<li class="cat-item cat-item-5"><a href="https://blog.infographics.tw/category/%e4%bd%9c%e5%93%81/">作品</a>
</li>
	<li class="cat-item cat-item-19"><a href="https://blog.infographics.tw/category/%e5%af%a6%e6%88%b0/">實戰</a>
</li>
	<li class="cat-item cat-item-2"><a href="https://blog.infographics.tw/category/%e5%bf%83%e6%b3%95/">心法</a>
</li>
	<li class="cat-item cat-item-18"><a href="https://blog.infographics.tw/category/%e6%95%99%e5%ad%b8/">教學</a>
</li>
	<li class="cat-item cat-item-237"><a href="https://blog.infographics.tw/category/%e6%a1%88%e4%be%8b/">案例</a>
</li>
	<li class="cat-item cat-item-6"><a href="https://blog.infographics.tw/category/%e6%a6%82%e5%bf%b5/">概念</a>
</li>
		</ul>
			</div><div class="widget_text widget widget_custom_html" id="custom_html-3"><div class="textwidget custom-html-widget">

<ins data-ad-slot="8866475899" data-ad-client="ca-pub-2167218457160447" style="display:inline-block;width:336px;height:280px" class="adsbygoogle"></ins>
</div></div>
	
</div>
				</div>

			